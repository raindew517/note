# DDOS防范

在许多黑客题材的电视剧电影中，我们可以看到 **DDOS (分布式拒绝服务) 攻击** 经常出现。DDOS 出镜率之所以高是因为其易攻难守。十多年过去了，DDOS 攻击仍是业界安全问题中一个难题，当攻击流量超过了服务的网络设备的极限或带宽的最大负荷时，网站服务将瘫痪导致无法正常运作。

通常来说，对于 DDOS 攻击我们可以通过下面的方式来进行防范。

## 验证码

验证码是我们在互联网十分常见的技术之一。不得不说验证码是能够有效地防止多次重复请求的行为。目前来说，随着验证码方式的丰富化，导致黑客们没有一个比较有效的方式来获取和识别验证码。但由于验证码会影响到用户体验，因此验证码只有在比较重要的入口才会使用，如转账和登陆的场景。

## 限制请求频率（ratelimit）

**限制请求频率**是我们最常见的针对 DDOS 攻击的防御措施。其原理为设置每个**客户端**的请求频率的限制。简单来说，就是通过一些标识（如 IP 与 Cookie）来定位一个客户端，如果该客户端的请求在一定时间内过于频繁。则对该客户端之后的请求都重定向到一个出错的页面或者封杀相关 IP。

当然许多框架都会有相应地限制请求频率的工具包，如 `koa` 框架便可以使用下面这些：

- [koa-limit](https://github.com/cnpm/koa-limit)
- [koa-ratelimit](https://github.com/koajs/ratelimit)

## 扩容加带宽

简单来说就是，增加机器增加服务带宽。只要超过了攻击流量便可以避免服务瘫痪。在**双十一活动**或者**12306 抢车票**等场景时，网站服务都会对自己的机器进行扩容和提高带宽。然而为了避免由于使用过多机器导致成本太高且浪费的情况。通常来说都是根据网站活动和请求情况来实施相应扩容操作。

## 其他的方法

事实上还有许多其他的方法，根据不同情况都有相应的效果

- 设置自己的业务为分布式服务，防止单点失效
- 使用主流云系统和 CDN（云和 CDN 其自身有 DDOS 的防范作用）
- 优化资源使用提高 web server 的负载能力

## 更多阅读

网上有许多 DDOS 的帖子，大家感兴趣可以阅读下：

- [互联网创业公司如何防御 DDOS 攻击？](https://www.zhihu.com/question/19581905)
- [漫画告诉你什么是DDoS攻击？](https://www.leiphone.com/news/201509/9zGlIDvLhwguqOtg.html)